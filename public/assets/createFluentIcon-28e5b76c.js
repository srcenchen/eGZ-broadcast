import{z as Xe,A as $e,_ as Ye,r as V,S as Ze,w as Re,B as N,K as pe,p as et,q as tt,n as it,m as st}from"./index-03e76592.js";function ot(l,e){const t=Ye(l,e);return function(){const s=Xe(),o=$e();return t({dir:s,renderer:o})}}const ei=(l,e)=>{const{required:t=!1,defaultProps:i}=e||{};if(l===null||l===void 0&&!t)return;let s={};return typeof l=="string"||typeof l=="number"||Array.isArray(l)||V.isValidElement(l)?s.children=l:typeof l=="object"&&(s=l),s={...i,...s},typeof s.children=="function"&&(s[Ze]=s.children,s.children=i==null?void 0:i.children),s},ti=l=>{const e=V.useRef(()=>{throw new Error("Cannot call an event handler while rendering")});return Re(()=>{e.current=l},[l]),V.useCallback((...t)=>{const i=e.current;return i(...t)},[e])};/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const P="data-tabster",Me="data-tabster-dummy",xe="tabster:deloser",ke="tabster:modalizer:active",Oe="tabster:modalizer:inactive",rt="tabster:modalizer:focusin",nt="tabster:modalizer:focusout",Ae="tabster:modalizer:beforefocusout",le="tabster:mover",Ne="tabster:focusin",ze="tabster:focusout",at={Any:0,Accessible:1,Focusable:2},U={History:0,DeloserDefault:1,RootDefault:2,DeloserFirst:3,RootFirst:4},z={Invisible:0,PartiallyVisible:1,Visible:2},B={Both:0,Vertical:1,Horizontal:2,Grid:3},Pe={Unlimited:0,Limited:1,LimitedTrapFocus:2},Le={Auto:0,Inside:1,Outside:2};var ii=Object.freeze({__proto__:null,TabsterAttributeName:P,TabsterDummyInputAttributeName:Me,DeloserEventName:xe,ModalizerActiveEventName:ke,ModalizerInactiveEventName:Oe,ModalizerFocusInEventName:rt,ModalizerFocusOutEventName:nt,ModalizerBeforeFocusOutEventName:Ae,MoverEventName:le,FocusInEventName:Ne,FocusOutEventName:ze,ObservedElementAccesibilities:at,RestoreFocusOrders:U,Visibilities:z,MoverDirections:B,GroupperTabbabilities:Pe,SysDummyInputsPositions:Le});/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function x(l,e){var t;return(t=l.storageEntry(e))===null||t===void 0?void 0:t.tabster}function We(l,e,t){var i,s;const o=t||l._noop?void 0:e.getAttribute(P);let r=l.storageEntry(e),a;if(o)if(o!==((i=r==null?void 0:r.attr)===null||i===void 0?void 0:i.string))try{const d=JSON.parse(o);if(typeof d!="object")throw new Error(`Value is not a JSON object, got '${o}'.`);a={string:o,object:d}}catch{}else return;else if(!r)return;r||(r=l.storageEntry(e,!0)),r.tabster||(r.tabster={});const n=r.tabster||{},u=((s=r.attr)===null||s===void 0?void 0:s.object)||{},c=(a==null?void 0:a.object)||{};for(const d of Object.keys(u))if(!c[d]){if(d==="root"){const m=n[d];m&&l.root.onRoot(m,!0)}switch(d){case"deloser":case"root":case"groupper":case"modalizer":case"mover":const m=n[d];m&&(m.dispose(),delete n[d]);break;case"observed":delete n[d],l.observedElement&&l.observedElement.onObservedElementUpdate(e);break;case"focusable":case"outline":case"uncontrolled":case"sys":delete n[d];break}}for(const d of Object.keys(c)){const m=c.sys;switch(d){case"deloser":n.deloser?n.deloser.setProps(c.deloser):l.deloser&&(n.deloser=l.deloser.createDeloser(e,c.deloser));break;case"root":n.root?n.root.setProps(c.root):n.root=l.root.createRoot(e,c.root,m),l.root.onRoot(n.root);break;case"modalizer":n.modalizer?n.modalizer.setProps(c.modalizer):l.modalizer&&(n.modalizer=l.modalizer.createModalizer(e,c.modalizer,m));break;case"focusable":n.focusable=c.focusable;break;case"groupper":n.groupper?n.groupper.setProps(c.groupper):l.groupper&&(n.groupper=l.groupper.createGroupper(e,c.groupper,m));break;case"mover":n.mover?n.mover.setProps(c.mover):l.mover&&(n.mover=l.mover.createMover(e,c.mover,m));break;case"observed":l.observedElement&&(n.observed=c.observed,l.observedElement.onObservedElementUpdate(e));break;case"uncontrolled":n.uncontrolled=c.uncontrolled;break;case"outline":l.outline&&(n.outline=c.outline);break;case"sys":n.sys=c.sys;break;default:console.error(`Unknown key '${d}' in data-tabster attribute value.`)}}a?r.attr=a:(Object.keys(n).length===0&&(delete r.tabster,delete r.attr),l.storageEntry(e,!1))}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function lt(l){const e=l();try{if(e.EventTarget)return new e.EventTarget}catch(t){if(!(t instanceof TypeError))throw t}return e.document.createElement("div")}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */let ue;const ge=typeof DOMRect<"u"?DOMRect:class{constructor(l,e,t,i){this.left=l||0,this.top=e||0,this.right=(l||0)+(t||0),this.bottom=(e||0)+(i||0)}};let ut=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),ue=!1}catch{ue=!0}const oe=100;function W(l){const e=l();let t=e.__tabsterInstanceContext;return t||(t={elementByUId:{},basics:{Promise:e.Promise||void 0,WeakRef:e.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,fakeWeakRefs:[],fakeWeakRefsStarted:!1},e.__tabsterInstanceContext=t),t}function ct(l){const e=l.__tabsterInstanceContext;e&&(e.elementByUId={},delete e.WeakRef,e.containerBoundingRectCache={},e.containerBoundingRectCacheTimer&&l.clearTimeout(e.containerBoundingRectCacheTimer),e.fakeWeakRefsTimer&&l.clearTimeout(e.fakeWeakRefsTimer),e.fakeWeakRefs=[],delete l.__tabsterInstanceContext)}function dt(l){const e=l.__tabsterInstanceContext;return new((e==null?void 0:e.basics.WeakMap)||WeakMap)}class Se{constructor(e){this._target=e}deref(){return this._target}static cleanup(e,t){return e._target?t||!q(e._target.ownerDocument,e._target)?(delete e._target,!0):!1:!0}}class L{constructor(e,t,i){const s=W(e);let o;s.WeakRef?o=new s.WeakRef(t):(o=new Se(t),s.fakeWeakRefs.push(o)),this._ref=o,this._data=i}get(){const e=this._ref;let t;return e&&(t=e.deref(),t||delete this._ref),t}getData(){return this._data}}function Ue(l,e){const t=W(l);t.fakeWeakRefs=t.fakeWeakRefs.filter(i=>!Se.cleanup(i,e))}function Be(l){const e=W(l);e.fakeWeakRefsStarted||(e.fakeWeakRefsStarted=!0,e.WeakRef=mt(e)),e.fakeWeakRefsTimer||(e.fakeWeakRefsTimer=l().setTimeout(()=>{e.fakeWeakRefsTimer=void 0,Ue(l),Be(l)},2*60*1e3))}function ft(l){const e=W(l);e.fakeWeakRefsStarted=!1,e.fakeWeakRefsTimer&&(l().clearTimeout(e.fakeWeakRefsTimer),e.fakeWeakRefsTimer=void 0,e.fakeWeakRefs=[])}function he(l,e,t){if(e.nodeType!==Node.ELEMENT_NODE)return;const i=ue?t:{acceptNode:t};return l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,i,!1)}function Ve(l,e){let t=e.__tabsterCacheId;const i=W(l),s=t?i.containerBoundingRectCache[t]:void 0;if(s)return s.rect;const o=e.ownerDocument&&e.ownerDocument.documentElement;if(!o)return new ge;let r=0,a=0,n=o.clientWidth,u=o.clientHeight;if(e!==o){const d=e.getBoundingClientRect();r=Math.max(r,d.left),a=Math.max(a,d.top),n=Math.min(n,d.right),u=Math.min(u,d.bottom)}const c=new ge(r<n?r:-1,a<u?a:-1,r<n?n-r:0,a<u?u-a:0);return t||(t="r-"+ ++i.lastContainerBoundingRectCacheId,e.__tabsterCacheId=t),i.containerBoundingRectCache[t]={rect:c,element:e},i.containerBoundingRectCacheTimer||(i.containerBoundingRectCacheTimer=window.setTimeout(()=>{i.containerBoundingRectCacheTimer=void 0;for(const d of Object.keys(i.containerBoundingRectCache))delete i.containerBoundingRectCache[d].element.__tabsterCacheId;i.containerBoundingRectCache={}},50)),c}function Ee(l,e,t){const i=Ge(e);if(!i)return!1;const s=Ve(l,i),o=e.getBoundingClientRect(),r=o.height*(1-t),a=Math.max(0,s.top-o.top),n=Math.max(0,o.bottom-s.bottom),u=a+n;return u===0||u<=r}function ye(l,e,t){const i=Ge(e);if(i){const s=Ve(l,i),o=e.getBoundingClientRect();t?i.scrollTop+=o.top-s.top:i.scrollTop+=o.bottom-s.bottom}}function Ge(l){const e=l.ownerDocument;if(e){for(let t=l.parentElement;t;t=t.parentElement)if(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)return t;return e.documentElement}return null}function ht(l){l.__shouldIgnoreFocus=!0}function Ke(l){return!!l.__shouldIgnoreFocus}function _t(l){const e=new Uint32Array(4);if(l.crypto&&l.crypto.getRandomValues)l.crypto.getRandomValues(e);else if(l.msCrypto&&l.msCrypto.getRandomValues)l.msCrypto.getRandomValues(e);else for(let i=0;i<e.length;i++)e[i]=4294967295*Math.random();const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(36));return t.push("|"),t.push((++ut).toString(36)),t.push("|"),t.push(Date.now().toString(36)),t.join("")}function K(l,e){const t=W(l);let i=e.__tabsterElementUID;return i||(i=e.__tabsterElementUID=_t(l())),!t.elementByUId[i]&&q(e.ownerDocument,e)&&(t.elementByUId[i]=new L(l,e)),i}function Te(l,e){const t=W(l);for(const i of Object.keys(t.elementByUId)){const s=t.elementByUId[i],o=s&&s.get();o&&e&&!e.contains(o)||delete t.elementByUId[i]}}function q(l,e){var t;return!!(!((t=l==null?void 0:l.body)===null||t===void 0)&&t.contains(e))}function He(l,e){const t=l.matches||l.matchesSelector||l.msMatchesSelector||l.webkitMatchesSelector;return t&&t.call(l,e)}function je(l){const e=W(l);if(e.basics.Promise)return e.basics.Promise;throw new Error("No Promise defined.")}function mt(l){return l.basics.WeakRef}let vt=0;class j{constructor(e,t,i){const s=e.getWindow;this._tabster=e,this._element=new L(s,t),this._props={...i},this.id="i"+ ++vt}getElement(){return this._element.get()}getProps(){return this._props}setProps(e){this._props={...e}}}class ce{constructor(e,t,i,s){var o;this._focusIn=u=>{const c=this.input;if(this.onFocusIn&&c){const d=A.getLastPhantomFrom()||u.relatedTarget;this.onFocusIn(this,this._isBackward(!0,c,d),d)}},this._focusOut=u=>{this.useDefaultAction=!1;const c=this.input;if(this.onFocusOut&&c){const d=u.relatedTarget;this.onFocusOut(this,this._isBackward(!1,c,d),d)}};const r=e(),a=r.document.createElement("i");a.tabIndex=0,a.setAttribute("role","none"),a.setAttribute(Me,""),a.setAttribute("aria-hidden","true");const n=a.style;n.position="fixed",n.width=n.height="1px",n.opacity="0.001",n.zIndex="-1",n.setProperty("content-visibility","hidden"),ht(a),this.input=a,this.isFirst=i.isFirst,this.isOutside=t,this._isPhantom=(o=i.isPhantom)!==null&&o!==void 0?o:!1,a.addEventListener("focusin",this._focusIn),a.addEventListener("focusout",this._focusOut),a.__tabsterDummyContainer=s,this._isPhantom&&(this._disposeTimer=r.setTimeout(()=>{delete this._disposeTimer,this.dispose()},0),this._clearDisposeTimeout=()=>{this._disposeTimer&&(r.clearTimeout(this._disposeTimer),delete this._disposeTimer),delete this._clearDisposeTimeout})}dispose(){var e;this._clearDisposeTimeout&&this._clearDisposeTimeout();const t=this.input;t&&(delete this.onFocusIn,delete this.onFocusOut,delete this.input,t.removeEventListener("focusin",this._focusIn),t.removeEventListener("focusout",this._focusOut),delete t.__tabsterDummyContainer,(e=t.parentElement)===null||e===void 0||e.removeChild(t))}setTopLeft(e,t){var i;const s=(i=this.input)===null||i===void 0?void 0:i.style;s&&(s.top=`${e}px`,s.left=`${t}px`)}_isBackward(e,t,i){return e&&!i?!this.isFirst:!!(i&&t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING)}}const X={Root:1,Modalizer:2,Mover:3,Groupper:4};class A{constructor(e,t,i,s,o,r){this._element=t,this._instance=new pt(e,t,this,i,s,o,r),this.moveOut=a=>{var n;(n=this._instance)===null||n===void 0||n.moveOut(a)},this.moveOutWithDefaultAction=a=>{var n;(n=this._instance)===null||n===void 0||n.moveOutWithDefaultAction(a)}}_setHandlers(e,t){this._onFocusIn=e,this._onFocusOut=t}getHandler(e){return e?this._onFocusIn:this._onFocusOut}setTabbable(e){var t;(t=this._instance)===null||t===void 0||t.setTabbable(this,e)}dispose(){this._instance&&(this._instance.dispose(this),delete this._instance),delete this._onFocusIn,delete this._onFocusOut}static getLastPhantomFrom(){const e=A._lastPhantomFrom;return delete A._lastPhantomFrom,e}static moveWithPhantomDummy(e,t,i,s){const r=new ce(e.getWindow,!0,{isPhantom:!0,isFirst:!0}).input;if(r){const a=t.parentElement;if(a){let n=i&&!s||!i&&s?t.nextElementSibling:t;if(n)if(s){const u=n.previousElementSibling;u&&u.__tabsterDummyContainer&&(n=u)}else n.__tabsterDummyContainer&&(n=n.nextElementSibling);a.insertBefore(r,n),A._lastPhantomFrom=t,e.getWindow().setTimeout(()=>{delete A._lastPhantomFrom},0),N(r)}}}}class bt{constructor(e){this._updateQueue=new Set,this._lastUpdateQueueTime=0,this._changedParents=new WeakSet,this._dummies=new Map,this._domChanged=t=>{var i;this._changedParents.has(t)||(this._changedParents.add(t),!this._updateDummyInputsTimer&&(this._updateDummyInputsTimer=(i=this._win)===null||i===void 0?void 0:i.call(this).setTimeout(()=>{delete this._updateDummyInputsTimer;for(const[s,o]of this._dummies){const r=s.parentElement;(!r||this._changedParents.has(r))&&o()}this._changedParents=new WeakSet},oe)))},this._win=e}add(e,t){this._dummies.set(e,t),this.domChanged=this._domChanged}remove(e){const t=this._dummies;t.delete(e),t.size===0&&delete this.domChanged}dispose(){var e;const t=(e=this._win)===null||e===void 0?void 0:e.call(this);this._updateTimer&&(t==null||t.clearTimeout(this._updateTimer),delete this._updateTimer),this._updateDummyInputsTimer&&(t==null||t.clearTimeout(this._updateDummyInputsTimer),delete this._updateDummyInputsTimer),this._changedParents=new WeakSet,this._dummies.clear(),delete this._win}updatePositions(e){this._win&&(this._updateQueue.add(e),this._lastUpdateQueueTime=Date.now(),this._scheduledUpdatePositions())}_scheduledUpdatePositions(){var e;this._updateTimer||(this._updateTimer=(e=this._win)===null||e===void 0?void 0:e.call(this).setTimeout(()=>{if(delete this._updateTimer,this._lastUpdateQueueTime+oe<=Date.now()){const t=new Map,i=[];for(const s of this._updateQueue)i.push(s(t));this._updateQueue.clear();for(const s of i)s();t.clear()}else this._scheduledUpdatePositions()},oe))}}class pt{constructor(e,t,i,s,o,r,a){this._wrappers=[],this._isOutside=!1,this._transformElements=new Set,this._onFocusIn=(f,h,_)=>{this._onFocus(!0,f,h,_)},this._onFocusOut=(f,h,_)=>{this._onFocus(!1,f,h,_)},this.moveOut=f=>{var h;const _=this._firstDummy,b=this._lastDummy;if(_&&b){this._ensurePosition();const g=_.input,v=b.input,y=(h=this._element)===null||h===void 0?void 0:h.get();if(g&&v&&y){let E;f?(g.tabIndex=0,E=g):(v.tabIndex=0,E=v),E&&N(E)}}},this.moveOutWithDefaultAction=f=>{var h;const _=this._firstDummy,b=this._lastDummy;if(_&&b){this._ensurePosition();const g=_.input,v=b.input,y=(h=this._element)===null||h===void 0?void 0:h.get();if(g&&v&&y){let E;f?!_.isOutside&&this._tabster.focusable.isFocusable(y,!0,!0,!0)?E=y:(_.useDefaultAction=!0,g.tabIndex=0,E=g):(b.useDefaultAction=!0,v.tabIndex=0,E=v),E&&N(E)}}},this.setTabbable=(f,h)=>{var _,b;for(const v of this._wrappers)if(v.manager===f){v.tabbable=h;break}const g=this._getCurrent();if(g){const v=g.tabbable?0:-1;let y=(_=this._firstDummy)===null||_===void 0?void 0:_.input;y&&(y.tabIndex=v),y=(b=this._lastDummy)===null||b===void 0?void 0:b.input,y&&(y.tabIndex=v)}},this._addDummyInputs=()=>{this._addTimer||(this._addTimer=this._getWindow().setTimeout(()=>{delete this._addTimer,this._ensurePosition(),this._addTransformOffsets()},0))},this._addTransformOffsets=()=>{this._tabster._dummyObserver.updatePositions(this._computeTransformOffsets)},this._computeTransformOffsets=f=>{var h,_;const b=((h=this._firstDummy)===null||h===void 0?void 0:h.input)||((_=this._lastDummy)===null||_===void 0?void 0:_.input),g=this._transformElements,v=new Set;let y=0,E=0;const w=this._getWindow();for(let p=b;p&&p.nodeType===Node.ELEMENT_NODE;p=p.parentElement){let F=f.get(p);if(F===void 0){const R=w.getComputedStyle(p).transform;R&&R!=="none"&&(F={scrollTop:p.scrollTop,scrollLeft:p.scrollLeft}),f.set(p,F||null)}F&&(v.add(p),g.has(p)||p.addEventListener("scroll",this._addTransformOffsets),y+=F.scrollTop,E+=F.scrollLeft)}for(const p of g)v.has(p)||p.removeEventListener("scroll",this._addTransformOffsets);return this._transformElements=v,()=>{var p,F;(p=this._firstDummy)===null||p===void 0||p.setTopLeft(y,E),(F=this._lastDummy)===null||F===void 0||F.setTopLeft(y,E)}};const n=t.get();if(!n)throw new Error("No element");this._tabster=e,this._getWindow=e.getWindow,this._callForDefaultAction=a;const u=n.__tabsterDummy;if((u||this)._wrappers.push({manager:i,priority:s,tabbable:!0}),u)return u;n.__tabsterDummy=this;const c=o==null?void 0:o.dummyInputsPosition,d=n.tagName;this._isOutside=c?c===Le.Outside:(r||d==="UL"||d==="OL"||d==="TABLE")&&!(d==="LI"||d==="TD"||d==="TH"),this._firstDummy=new ce(this._getWindow,this._isOutside,{isFirst:!0},t),this._lastDummy=new ce(this._getWindow,this._isOutside,{isFirst:!1},t);const m=this._firstDummy.input;m&&e._dummyObserver.add(m,this._addDummyInputs),this._firstDummy.onFocusIn=this._onFocusIn,this._firstDummy.onFocusOut=this._onFocusOut,this._lastDummy.onFocusIn=this._onFocusIn,this._lastDummy.onFocusOut=this._onFocusOut,this._element=t,this._addDummyInputs()}dispose(e,t){var i,s,o,r;if((this._wrappers=this._wrappers.filter(n=>n.manager!==e&&!t)).length===0){delete((i=this._element)===null||i===void 0?void 0:i.get()).__tabsterDummy;for(const c of this._transformElements)c.removeEventListener("scroll",this._addTransformOffsets);this._transformElements.clear();const n=this._getWindow();this._addTimer&&(n.clearTimeout(this._addTimer),delete this._addTimer);const u=(s=this._firstDummy)===null||s===void 0?void 0:s.input;u&&this._tabster._dummyObserver.remove(u),(o=this._firstDummy)===null||o===void 0||o.dispose(),(r=this._lastDummy)===null||r===void 0||r.dispose()}}_onFocus(e,t,i,s){var o;const r=this._getCurrent();r&&(!t.useDefaultAction||this._callForDefaultAction)&&((o=r.manager.getHandler(e))===null||o===void 0||o(t,i,s))}_getCurrent(){return this._wrappers.sort((e,t)=>e.tabbable!==t.tabbable?e.tabbable?-1:1:e.priority-t.priority),this._wrappers[0]}_ensurePosition(){var e,t,i;const s=(e=this._element)===null||e===void 0?void 0:e.get(),o=(t=this._firstDummy)===null||t===void 0?void 0:t.input,r=(i=this._lastDummy)===null||i===void 0?void 0:i.input;if(!(!s||!o||!r))if(this._isOutside){const a=s.parentElement;if(a){const n=s.nextElementSibling;n!==r&&a.insertBefore(r,n),s.previousElementSibling!==o&&a.insertBefore(o,s)}}else{s.lastElementChild!==r&&s.appendChild(r);const a=s.firstElementChild;a&&a!==o&&s.insertBefore(o,a)}}}function de(l){let e=null;for(let t=l.lastElementChild;t;t=t.lastElementChild)e=t;return e||void 0}function fe(l,e){let t=l,i=null;for(;t&&!i;)i=e?t.previousElementSibling:t.nextElementSibling,t=t.parentElement;return i||void 0}function S(l,e,t){const i=document.createEvent("HTMLEvents");return i.initEvent(e,!0,!0),i.details=t,l.dispatchEvent(i),!i.defaultPrevented}function re(l,e,t,i){const s=l.storageEntry(e,!0);let o=!1;if(!s.aug){if(i===void 0)return o;s.aug={}}if(i===void 0){if(t in s.aug){const r=s.aug[t];delete s.aug[t],r===null?e.removeAttribute(t):e.setAttribute(t,r),o=!0}}else{let r;t in s.aug||(r=e.getAttribute(t)),r!==void 0&&r!==i&&(s.aug[t]=r,i===null?e.removeAttribute(t):e.setAttribute(t,i),o=!0)}return i===void 0&&Object.keys(s.aug).length===0&&(delete s.aug,l.storageEntry(e,!1)),o}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function Qe(l,e){const t=JSON.stringify(l);return e===!0?t:{[P]:t}}function gt(l,e){for(const t of Object.keys(e)){const i=e[t];i?l[t]=i:delete l[t]}}function Et(l,e,t){let i;if(t){const s=l.getAttribute(P);if(s)try{i=JSON.parse(s)}catch{}}i||(i={}),gt(i,e),Object.keys(i).length>0?l.setAttribute(P,Qe(i,!0)):l.removeAttribute(P)}class we extends A{constructor(e,t,i,s){super(e,t,X.Root,s,void 0,!0),this._onDummyInputFocus=o=>{var r;if(o.useDefaultAction)this._setFocused(!1,!0);else{this._tabster.keyboardNavigation.setNavigatingWithKeyboard(!0);const a=this._element.get();if(a){this._setFocused(!0,!0);const n=this._tabster.focusedElement.getFirstOrLastTabbable(o.isFirst,{container:a,ignoreAccessibility:!0});if(n){N(n);return}}(r=o.input)===null||r===void 0||r.blur()}},this._setHandlers(this._onDummyInputFocus),this._tabster=e,this._setFocused=i}}class yt extends j{constructor(e,t,i,s,o){super(e,t,s),this._isFocused=!1,this._setFocused=(a,n)=>{if(this._setFocusedTimer&&(this._tabster.getWindow().clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._isFocused===a)return;const u=this._element.get();u&&(a?(this._isFocused=!0,S(this._tabster.root.eventTarget,"focus",{element:u,fromAdjacent:n})):this._setFocusedTimer=this._tabster.getWindow().setTimeout(()=>{delete this._setFocusedTimer,this._isFocused=!1,S(this._tabster.root.eventTarget,"blur",{element:u,fromAdjacent:n})},0))},this._onFocus=a=>{var n;const u=this._tabster.getWindow();if(this._setTabbableTimer&&(u.clearTimeout(this._setTabbableTimer),delete this._setTabbableTimer),a){const c=D.getTabsterContext(this._tabster,a);if(c&&this._setFocused(c.root.getElement()===this._element.get()),!c||c.uncontrolled||this._tabster.rootDummyInputs){(n=this._dummyManager)===null||n===void 0||n.setTabbable(!1);return}}else this._setFocused(!1);this._setTabbableTimer=u.setTimeout(()=>{var c;delete this._setTabbableTimer,(c=this._dummyManager)===null||c===void 0||c.setTabbable(!0)},0)},this._onDispose=i;const r=e.getWindow;this.uid=K(r,t),this._sys=o,(e.controlTab||e.rootDummyInputs)&&this.addDummyInputs(),e.focusedElement.subscribe(this._onFocus),this._add()}addDummyInputs(){this._dummyManager||(this._dummyManager=new we(this._tabster,this._element,this._setFocused,this._sys))}dispose(){var e;this._onDispose(this);const t=this._tabster.getWindow();this._setFocusedTimer&&(t.clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._setTabbableTimer&&(t.clearTimeout(this._setTabbableTimer),delete this._setTabbableTimer),(e=this._dummyManager)===null||e===void 0||e.dispose(),this._remove()}moveOutWithDefaultAction(e){const t=this._dummyManager;if(t)t.moveOutWithDefaultAction(e);else{const i=this.getElement();i&&we.moveWithPhantomDummy(this._tabster,i,!0,e)}}_add(){}_remove(){}}class D{constructor(e,t){this._autoRootWaiting=!1,this._roots={},this._forceDummy=!1,this.rootById={},this._autoRootCreate=()=>{var i;const s=this._win().document,o=s.body;if(o){this._autoRootUnwait(s);const r=this._autoRoot;if(r)return Et(o,{root:r},!0),We(this._tabster,o),(i=x(this._tabster,o))===null||i===void 0?void 0:i.root}else this._autoRootWaiting||(this._autoRootWaiting=!0,s.addEventListener("readystatechange",this._autoRootCreate))},this._onRootDispose=i=>{delete this._roots[i.id]},this._tabster=e,this._win=e.getWindow,this._autoRoot=t,this.eventTarget=lt(this._win),e.queueInit(()=>{this._autoRoot&&this._autoRootCreate()})}_autoRootUnwait(e){e.removeEventListener("readystatechange",this._autoRootCreate),this._autoRootWaiting=!1}dispose(){const e=this._win();this._autoRootUnwait(e.document),delete this._autoRoot,Object.keys(this._roots).forEach(t=>{this._roots[t]&&(this._roots[t].dispose(),delete this._roots[t])}),this.rootById={}}createRoot(e,t,i){const s=new yt(this._tabster,e,this._onRootDispose,t,i);return this._roots[s.id]=s,this._forceDummy&&s.addDummyInputs(),s}addDummyInputs(){this._forceDummy=!0;const e=this._roots;for(const t of Object.keys(e))e[t].addDummyInputs()}static getRootByUId(e,t){const i=e().__tabsterInstance;return i&&i.root.rootById[t]}static getTabsterContext(e,t,i){i===void 0&&(i={});var s,o,r,a;if(!t.ownerDocument)return;e.drainInitQueue();const n=i.checkRtl;let u,c,d,m,f=!1,h,_,b,g,v=t;const y={};for(;v&&(!u||n);){const w=x(e,v);if(n&&b===void 0){const T=v.dir;T&&(b=T.toLowerCase()==="rtl")}if(!w){v=v.parentElement;continue}const p=v.tagName;(w.uncontrolled||p==="IFRAME"||p==="WEBVIEW")&&(g=v),!m&&(!((s=w.focusable)===null||s===void 0)&&s.excludeFromMover)&&!d&&(f=!0);const F=w.modalizer,R=w.groupper,k=w.mover;!c&&F&&(c=F),!d&&R&&(!c||F)&&(c?(!R.isActive()&&R.getProps().tabbability&&c.userId!==((o=e.modalizer)===null||o===void 0?void 0:o.activeId)&&(c=void 0,d=R),_=R):d=R),!m&&k&&(!c||F)&&(!R||v!==t)&&(m=k,h=!!d&&d!==R),w.root&&(u=w.root),!((r=w.focusable)===null||r===void 0)&&r.ignoreKeydown&&Object.assign(y,w.focusable.ignoreKeydown),v=v.parentElement}if(!u){const w=e.root;w._autoRoot&&!((a=t.ownerDocument)===null||a===void 0)&&a.body&&(u=w._autoRootCreate())}return d&&!m&&(h=!0),u?{root:u,modalizer:c,groupper:d,mover:m,isGroupperFirst:h,modalizerInGroupper:_,isRtl:n?!!b:void 0,uncontrolled:g,isExcludedFromMover:f,ignoreKeydown:w=>!!y[w.key]}:void 0}static getRoot(e,t){var i;for(let s=t;s;s=s.parentElement){const o=(i=x(e,s))===null||i===void 0?void 0:i.root;if(o)return o}}onRoot(e,t){t?delete this.rootById[e.uid]:this.rootById[e.uid]=e}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const H=10;class Tt{}class wt extends Tt{constructor(e,t){super(),this.uid=t.uid,this._tabster=e,this._deloser=t}belongsTo(e){return e===this._deloser}unshift(e){this._deloser.unshift(e)}async focusAvailable(){const e=this._deloser.findAvailable();return e?this._tabster.focusedElement.focus(e):!1}async resetFocus(){const e=this._tabster.getWindow;return je(e).resolve(this._deloser.resetFocus())}}class Ft{constructor(e,t){this._history=[],this._tabster=e,this.rootUId=t}getLength(){return this._history.length}removeDeloser(e){this._history=this._history.filter(t=>!t.belongsTo(e))}hasDeloser(e){return this._history.some(t=>t.belongsTo(e))}}class It extends Ft{unshiftToDeloser(e,t){let i;for(let s=0;s<this._history.length;s++)if(this._history[s].belongsTo(e)){i=this._history[s],this._history.splice(s,1);break}i||(i=new wt(this._tabster,e)),i.unshift(t),this._history.unshift(i),this._history.splice(H,this._history.length-H)}async focusAvailable(e){let t=!!e;for(const i of this._history)if(e&&i.belongsTo(e)&&(t=!1),!t&&await i.focusAvailable())return!0;return!1}async resetFocus(e){let t=!!e;const i={};for(const s of this._history)e&&s.belongsTo(e)&&(t=!1),!t&&!i[s.uid]&&(i[s.uid]=s);for(const s of Object.keys(i))if(await i[s].resetFocus())return!0;return!1}}class Dt{constructor(e){this._history=[],this._tabster=e}dispose(){this._history=[]}process(e){var t;const i=D.getTabsterContext(this._tabster,e),s=i&&i.root.uid,o=Je.getDeloser(this._tabster,e);if(!s||!o)return;const r=this.make(s,()=>new It(this._tabster,s));return(!i||!i.modalizer||!((t=i.modalizer)===null||t===void 0)&&t.isActive())&&r.unshiftToDeloser(o,e),o}make(e,t){let i;for(let s=0;s<this._history.length;s++){const o=this._history[s];if(o.rootUId===e){i=o,this._history.splice(s,1);break}}return i||(i=t()),this._history.unshift(i),this._history.splice(H,this._history.length-H),i}removeDeloser(e){this._history.forEach(t=>{t.removeDeloser(e)}),this._history=this._history.filter(t=>t.getLength()>0)}async focusAvailable(e){let t=!!e;for(const i of this._history)if(e&&i.hasDeloser(e)&&(t=!1),!t&&await i.focusAvailable(e))return!0;return!1}async resetFocus(e){let t=!!e;for(const i of this._history)if(e&&i.hasDeloser(e)&&(t=!1),!t&&await i.resetFocus(e))return!0;return!1}}function Fe(l,e,t){const i=[],s=/(:|\.|\[|\]|,|=|@)/g,o="\\$1";l.id&&i.push("#"+l.id.replace(s,o)),e!==!1&&l.className&&l.className.split(" ").forEach(n=>{n=n.trim(),n&&i.push("."+n.replace(s,o))});let r=0,a;if(t!==!1&&i.length===0){for(a=l;a;)r++,a=a.previousElementSibling;i.unshift(":nth-child("+r+")")}return i.unshift(l.tagName.toLowerCase()),i.join("")}function Ct(l){if(!q(l.ownerDocument,l))return;const e=[Fe(l)];let t=l.parentElement;for(;t;){const i=t.tagName==="BODY";if(e.unshift(Fe(t,!1,!i)),i)break;t=t.parentElement}return e.join(" ")}class Ie extends j{constructor(e,t,i,s){super(e,t,s),this._isActive=!1,this._history=[[]],this._snapshotIndex=0,this.isActive=()=>this._isActive,this.setSnapshot=o=>{this._snapshotIndex=o,this._history.length>o+1&&this._history.splice(o+1,this._history.length-o-1),this._history[o]||(this._history[o]=[])},this.focusFirst=()=>{const o=this._element.get();return!!o&&this._tabster.focusedElement.focusFirst({container:o})},this.focusDefault=()=>{const o=this._element.get();return!!o&&this._tabster.focusedElement.focusDefault(o)},this.resetFocus=()=>{const o=this._element.get();return!!o&&this._tabster.focusedElement.resetFocus(o)},this.clearHistory=o=>{const r=this._element.get();if(!r){this._history[this._snapshotIndex]=[];return}this._history[this._snapshotIndex]=this._history[this._snapshotIndex].filter(a=>{const n=a.get();return n&&o?r.contains(n):!1})},this.uid=K(e.getWindow,t),this._onDispose=i}dispose(){this._remove(),this._onDispose(this),this._isActive=!1,this._snapshotIndex=0,this._props={},this._history=[]}setActive(e){this._isActive=e}getActions(){return{focusDefault:this.focusDefault,focusFirst:this.focusFirst,resetFocus:this.resetFocus,clearHistory:this.clearHistory,setSnapshot:this.setSnapshot,isActive:this.isActive}}unshift(e){let t=this._history[this._snapshotIndex];for(t=this._history[this._snapshotIndex]=t.filter(i=>{const s=i.get();return s&&s!==e}),t.unshift(new L(this._tabster.getWindow,e,Ct(e)));t.length>H;)t.pop()}findAvailable(){const e=this._element.get();if(!e||!this._tabster.focusable.isVisible(e))return null;let t=this._props.restoreFocusOrder,i=null;const s=D.getTabsterContext(this._tabster,e);if(!s)return null;const o=s.root,r=o.getElement();if(!r)return null;if(t===void 0&&(t=o.getProps().restoreFocusOrder),t===U.RootDefault&&(i=this._tabster.focusable.findDefault({container:r})),!i&&t===U.RootFirst&&(i=this._findFirst(r)),i)return i;const a=this._findInHistory(),n=this._tabster.focusable.findDefault({container:e}),u=this._findFirst(e);return a&&t===U.History?a:n&&t===U.DeloserDefault?n:u&&t===U.DeloserFirst?u:n||a||u||null}customFocusLostHandler(e){return S(e,xe,this.getActions())}_findInHistory(){const e=this._history[this._snapshotIndex].slice(0);this.clearHistory(!0);for(let t=0;t<e.length;t++){const i=e[t],s=i.get(),o=this._element.get();if(s&&o&&o.contains(s)){if(this._tabster.focusable.isFocusable(s))return s}else if(!this._props.noSelectorCheck){const r=i.getData();if(r&&o){let a;try{a=o.ownerDocument.querySelectorAll(r)}catch{continue}for(let n=0;n<a.length;n++){const u=a[n];if(u&&this._tabster.focusable.isFocusable(u))return u}}}}return null}_findFirst(e){if(this._tabster.keyboardNavigation.isNavigatingWithKeyboard()){const t=this._tabster.focusable.findFirst({container:e,ignoreUncontrolled:!0,useActiveModalizer:!0});if(t)return t}return null}_remove(){}}class Je{constructor(e,t){this._inDeloser=!1,this._isRestoringFocus=!1,this._isPaused=!1,this._onFocus=s=>{if(this._restoreFocusTimer&&(this._win().clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0),!s){this._scheduleRestoreFocus();return}const o=this._history.process(s);o?this._activate(o):this._deactivate()},this._onDeloserDispose=s=>{this._history.removeDeloser(s),s.isActive()&&this._scheduleRestoreFocus()},this._tabster=e,this._win=e.getWindow,this._history=new Dt(e),e.queueInit(()=>{this._tabster.focusedElement.subscribe(this._onFocus)});const i=t==null?void 0:t.autoDeloser;i&&(this._autoDeloser=i)}dispose(){const e=this._win();this._restoreFocusTimer&&(e.clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0),this._autoDeloserInstance&&(this._autoDeloserInstance.dispose(),delete this._autoDeloserInstance,delete this._autoDeloser),this._tabster.focusedElement.unsubscribe(this._onFocus),this._history.dispose(),delete this._curDeloser}createDeloser(e,t){var i;const s=new Ie(this._tabster,e,this._onDeloserDispose,t);return e.contains((i=this._tabster.focusedElement.getFocusedElement())!==null&&i!==void 0?i:null)&&this._activate(s),s}getActions(e){for(let t=e;t;t=t.parentElement){const i=x(this._tabster,t);if(i&&i.deloser)return i.deloser.getActions()}}pause(){this._isPaused=!0,this._restoreFocusTimer&&(this._win().clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0)}resume(e){this._isPaused=!1,e&&this._scheduleRestoreFocus()}_activate(e){const t=this._curDeloser;t!==e&&(this._inDeloser=!0,t==null||t.setActive(!1),e.setActive(!0),this._curDeloser=e)}_deactivate(){var e;this._inDeloser=!1,(e=this._curDeloser)===null||e===void 0||e.setActive(!1),this._curDeloser=void 0}_scheduleRestoreFocus(e){if(this._isPaused||this._isRestoringFocus)return;const t=async()=>{this._restoreFocusTimer=void 0;const i=this._tabster.focusedElement.getLastFocusedElement();if(!e&&(this._isRestoringFocus||!this._inDeloser||i!=null&&i.offsetParent))return;const s=this._curDeloser;if(s){if(i&&s.customFocusLostHandler(i))return;const o=s.findAvailable();if(o&&this._tabster.focusedElement.focus(o))return}this._deactivate(),this._isRestoringFocus=!0,await this._history.focusAvailable(null)||await this._history.resetFocus(null),this._isRestoringFocus=!1};e?t():this._restoreFocusTimer=this._win().setTimeout(t,100)}static getDeloser(e,t){var i;let s;for(let r=t;r;r=r.parentElement){const a=x(e,r);if(a){s||(s=a.root);const n=a.deloser;if(n)return n}}const o=e.deloser&&e.deloser;if(o){if(o._autoDeloserInstance)return o._autoDeloserInstance;const r=o._autoDeloser;if(s&&!o._autoDeloserInstance&&r){const a=(i=t.ownerDocument)===null||i===void 0?void 0:i.body;a&&(o._autoDeloserInstance=new Ie(e,a,e.deloser._onDeloserDispose,r))}return o._autoDeloserInstance}}static getHistory(e){return e._history}static forceRestoreFocus(e){e._scheduleRestoreFocus(!0)}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class qe{constructor(){this._callbacks=[]}dispose(){this._callbacks=[],delete this._val}subscribe(e){const t=this._callbacks;t.indexOf(e)<0&&t.push(e)}subscribeFirst(e){const t=this._callbacks,i=t.indexOf(e);i>=0&&t.splice(i,1),t.unshift(e)}unsubscribe(e){const t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}setVal(e,t){this._val!==e&&(this._val=e,this._callCallbacks(e,t))}getVal(){return this._val}trigger(e,t){this._callCallbacks(e,t)}_callCallbacks(e,t){this._callbacks.forEach(i=>i(e,t))}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const Rt=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","*[tabindex]","*[contenteditable]"].join(", ");class Mt{constructor(e){this._tabster=e}dispose(){}getProps(e){const t=x(this._tabster,e);return t&&t.focusable||{}}isFocusable(e,t,i,s){return He(e,Rt)&&(t||e.tabIndex!==-1)?(i||this.isVisible(e))&&(s||this.isAccessible(e)):!1}isVisible(e){if(!e.ownerDocument||e.nodeType!==Node.ELEMENT_NODE||e.offsetParent===null&&e.ownerDocument.body!==e)return!1;const t=e.ownerDocument.defaultView;if(!t)return!1;const i=e.ownerDocument.body.getBoundingClientRect();return!(i.width===0&&i.height===0||t.getComputedStyle(e).visibility==="hidden")}isAccessible(e){var t;for(let i=e;i;i=i.parentElement){const s=x(this._tabster,i);if(this._isHidden(i)||!((t=s==null?void 0:s.focusable)===null||t===void 0?void 0:t.ignoreAriaDisabled)&&this._isDisabled(i))return!1}return!0}_isDisabled(e){return e.hasAttribute("disabled")}_isHidden(e){var t;const i=e.getAttribute("aria-hidden");return!!(i&&i.toLowerCase()==="true"&&!(!((t=this._tabster.modalizer)===null||t===void 0)&&t.isAugmented(e)))}findFirst(e){return this.findElement({...e})}findLast(e){return this.findElement({isBackward:!0,...e})}findNext(e){return this.findElement({...e})}findPrev(e){return this.findElement({isBackward:!0,...e})}findDefault(e){return this.findElement({...e,acceptCondition:t=>this._tabster.focusable.isFocusable(t,e.includeProgrammaticallyFocusable)&&!!this.getProps(t).isDefault})||null}findAll(e){return this._findElements(!0,e)||[]}findElement(e){const t=this._findElements(!1,e);return t&&t[0]}_findElements(e,t){var i,s,o;const{container:r,currentElement:a=null,includeProgrammaticallyFocusable:n,useActiveModalizer:u,ignoreUncontrolled:c,ignoreAccessibility:d,modalizerId:m,isBackward:f,onUncontrolled:h,onElement:_}=t,b=[];let{acceptCondition:g}=t;if(!r)return null;g||(g=p=>this._tabster.focusable.isFocusable(p,n,!1,d));const v={container:r,modalizerUserId:m===void 0&&u?(i=this._tabster.modalizer)===null||i===void 0?void 0:i.activeId:m||((o=(s=D.getTabsterContext(this._tabster,r))===null||s===void 0?void 0:s.modalizer)===null||o===void 0?void 0:o.userId),from:a||r,isBackward:f,acceptCondition:g,includeProgrammaticallyFocusable:n,ignoreUncontrolled:c,ignoreAccessibility:d,cachedGrouppers:{}},y=he(r.ownerDocument,r,p=>this._acceptElement(p,v));if(!y)return null;const E=p=>{const F=v.foundElement;return F&&b.push(F),e?F&&(v.found=!1,delete v.foundElement,delete v.fromCtx,v.from=F,_&&!_(F))?!1:!!(F||p):!!(p&&!F)};if(a)y.currentNode=a;else if(f){const p=de(r);if(!p)return null;if(this._acceptElement(p,v)===NodeFilter.FILTER_ACCEPT&&!E(!0))return b;y.currentNode=p}let w;do w=(f?y.previousNode():y.nextNode())||void 0;while(E());if(!e){const p=v.nextUncontrolled;if(p)return h&&h(p),w?void 0:null}return b.length?b:null}_acceptElement(e,t){var i,s,o,r,a;if(t.found)return NodeFilter.FILTER_ACCEPT;const n=t.container;if(e===n)return NodeFilter.FILTER_SKIP;if(!n.contains(e)||e.__tabsterDummyContainer)return NodeFilter.FILTER_REJECT;let u=t.lastToIgnore;if(u){if(u.contains(e))return NodeFilter.FILTER_REJECT;u=t.lastToIgnore=void 0}const c=t.currentCtx=D.getTabsterContext(this._tabster,e);if(!c)return NodeFilter.FILTER_SKIP;if(t.ignoreUncontrolled){if(Ke(e))return NodeFilter.FILTER_SKIP}else if(c.uncontrolled&&!t.nextUncontrolled&&this._tabster.focusable.isFocusable(e,void 0,!0,!0)&&!c.groupper&&!c.mover&&((i=c.modalizer)===null||i===void 0?void 0:i.userId)===((s=this._tabster.modalizer)===null||s===void 0?void 0:s.activeId))return this.isVisible(c.uncontrolled)&&(t.nextUncontrolled=c.uncontrolled),NodeFilter.FILTER_REJECT;if(e.tagName==="IFRAME"||e.tagName==="WEBVIEW")return((o=c.modalizer)===null||o===void 0?void 0:o.userId)===((r=this._tabster.modalizer)===null||r===void 0?void 0:r.activeId)?(t.found=!0,t.lastToIgnore=t.foundElement=e,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT;if(!t.ignoreAccessibility&&!this.isAccessible(e))return NodeFilter.FILTER_REJECT;let d,m=t.fromCtx;m||(m=t.fromCtx=D.getTabsterContext(this._tabster,t.from));const f=m==null?void 0:m.mover;let h=c.groupper,_=c.mover;if(d=(a=this._tabster.modalizer)===null||a===void 0?void 0:a.acceptElement(e,t),d===void 0&&(h||_||f)){const b=h==null?void 0:h.getElement(),g=f==null?void 0:f.getElement();let v=_==null?void 0:_.getElement();v&&g&&n.contains(g)&&(!b||!_||g.contains(b))&&(_=f,v=g),b&&(b===n||!n.contains(b))&&(h=void 0),v&&!n.contains(v)&&(_=void 0),h&&_&&(v&&b&&!b.contains(v)?_=void 0:h=void 0),h&&(d=h.acceptElement(e,t)),_&&(d=_.acceptElement(e,t))}return d===void 0&&(d=t.acceptCondition(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),d===NodeFilter.FILTER_ACCEPT&&!t.found&&(t.found=!0,t.foundElement=e),d}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const I={Tab:9,Enter:13,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40};/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class M extends qe{constructor(e,t){super(),this._init=()=>{const i=this._win(),s=i.document;s.addEventListener(pe,this._onFocusIn,!0),s.addEventListener("focusout",this._onFocusOut,!0),i.addEventListener("keydown",this._onKeyDown,!0);const o=s.activeElement;o&&o!==s.body&&this._setFocusedElement(o),this.subscribe(this._onChanged)},this._onFocusIn=i=>{this._setFocusedElement(i.target,i.details.relatedTarget,i.details.isFocusedProgrammatically)},this._onFocusOut=i=>{this._setFocusedElement(void 0,i.relatedTarget)},this._validateFocusedElement=i=>{},this._onKeyDown=i=>{var s,o,r,a,n,u;if(i.keyCode!==I.Tab||i.ctrlKey)return;const c=this.getVal();if(!c||!c.ownerDocument||c.contentEditable==="true")return;const d=this._tabster,m=d.controlTab,f=D.getTabsterContext(d,c);if(!f||f.ignoreKeydown(i))return;const h=i.shiftKey,_=M.findNextTabbable(d,f,void 0,c,h,void 0,!0);let b;if(_){let g=_.uncontrolled;if(g){const v=f.isGroupperFirst;let y=!1;if(v!==void 0){const E=(s=f.groupper)===null||s===void 0?void 0:s.getElement(),w=(o=f.mover)===null||o===void 0?void 0:o.getElement();let p;v&&E&&g.contains(E)?p=E:!v&&w&&g.contains(w)&&(p=w),p&&(g=p,y=!0)}g&&f.uncontrolled!==g&&A.moveWithPhantomDummy(this._tabster,g,y,h);return}b=_.element}if(b){const g=()=>{i.preventDefault(),i.stopImmediatePropagation()};if(m)b.tagName!=="IFRAME"&&(g(),N(b));else{const v=_==null?void 0:_.lastMoverOrGroupper;let y=_==null?void 0:_.outOfDOMOrder;if(!y&&c.compareDocumentPosition(b)&(h?document.DOCUMENT_POSITION_FOLLOWING:document.DOCUMENT_POSITION_PRECEDING)&&(y=!0),y)g(),N(b);else if(v)(r=v.dummyManager)===null||r===void 0||r.moveOutWithDefaultAction(h);else if(f.modalizer){const E=D.getTabsterContext(d,b);(!E||f.root.uid!==E.root.uid||!(!((a=E.modalizer)===null||a===void 0)&&a.isActive()))&&f.modalizer.triggerFocusEvent(Ae,!0)?g():!((n=f.modalizer.getElement())===null||n===void 0)&&n.contains(b)||(g(),(u=f.modalizer.dummyManager)===null||u===void 0||u.moveOut(h))}}}else f.root.moveOutWithDefaultAction(h)},this._onChanged=(i,s)=>{var o,r;if(i)S(i,Ne,s);else{const a=(o=this._lastVal)===null||o===void 0?void 0:o.get();if(a){const n={...s},u=D.getTabsterContext(this._tabster,a),c=(r=u==null?void 0:u.modalizer)===null||r===void 0?void 0:r.userId;c&&(n.modalizerId=c),S(a,ze,n)}}},this._tabster=e,this._win=t,e.queueInit(this._init)}dispose(){super.dispose();const e=this._win();e.document.removeEventListener(pe,this._onFocusIn,!0),e.document.removeEventListener("focusout",this._onFocusOut,!0),e.removeEventListener("keydown",this._onKeyDown,!0),this.unsubscribe(this._onChanged),delete M._lastResetElement,delete this._nextVal,delete this._lastVal}static forgetMemorized(e,t){var i,s;let o=M._lastResetElement,r=o&&o.get();r&&t.contains(r)&&delete M._lastResetElement,r=(s=(i=e._nextVal)===null||i===void 0?void 0:i.element)===null||s===void 0?void 0:s.get(),r&&t.contains(r)&&delete e._nextVal,o=e._lastVal,r=o&&o.get(),r&&t.contains(r)&&delete e._lastVal}getFocusedElement(){return this.getVal()}getLastFocusedElement(){var e;let t=(e=this._lastVal)===null||e===void 0?void 0:e.get();return(!t||t&&!q(t.ownerDocument,t))&&(this._lastVal=t=void 0),t}focus(e,t,i){return this._tabster.focusable.isFocusable(e,t,!1,i)?(e.focus(),!0):!1}focusDefault(e){const t=this._tabster.focusable.findDefault({container:e});return t?(this._tabster.focusedElement.focus(t),!0):!1}getFirstOrLastTabbable(e,t){const i=this._tabster.focusable,{container:s,ignoreAccessibility:o}=t;let r,a;if(s){const n=D.getTabsterContext(this._tabster,s);if(n){let u=M.findNextTabbable(this._tabster,n,s,void 0,!e,void 0,o);if(u)for(a=u.element,r=u.uncontrolled;!a&&r;)i.isFocusable(r,!1,!0,!0)?a=r:a=i[e?"findFirst":"findLast"]({container:r,ignoreUncontrolled:!0,ignoreAccessibility:o,useActiveModalizer:!0}),a||(u=M.findNextTabbable(this._tabster,n,r,void 0,!e,void 0,o),u&&(a=u.element,r=u.uncontrolled))}}return a&&!(s!=null&&s.contains(a))&&(a=void 0),a||void 0}_focusFirstOrLast(e,t){const i=this.getFirstOrLastTabbable(e,t);return i?(this.focus(i,!1,!0),!0):!1}focusFirst(e){return this._focusFirstOrLast(!0,e)}focusLast(e){return this._focusFirstOrLast(!1,e)}resetFocus(e){if(!this._tabster.focusable.isVisible(e))return!1;if(this._tabster.focusable.isFocusable(e,!0,!0,!0))this.focus(e);else{const t=e.getAttribute("tabindex"),i=e.getAttribute("aria-hidden");e.tabIndex=-1,e.setAttribute("aria-hidden","true"),M._lastResetElement=new L(this._win,e),this.focus(e,!0,!0),this._setOrRemoveAttribute(e,"tabindex",t),this._setOrRemoveAttribute(e,"aria-hidden",i)}return!0}_setOrRemoveAttribute(e,t,i){i===null?e.removeAttribute(t):e.setAttribute(t,i)}_setFocusedElement(e,t,i){var s,o;if(this._tabster._noop)return;const r={relatedTarget:t};if(e){const n=(s=M._lastResetElement)===null||s===void 0?void 0:s.get();if(M._lastResetElement=void 0,n===e||Ke(e))return;r.isFocusedProgrammatically=i;const u=D.getTabsterContext(this._tabster,e),c=(o=u==null?void 0:u.modalizer)===null||o===void 0?void 0:o.userId;c&&(r.modalizerId=c)}const a=this._nextVal={element:e?new L(this._win,e):void 0,details:r};e&&e!==this._val&&this._validateFocusedElement(e),this._nextVal===a&&this.setVal(e,r),this._nextVal=void 0}setVal(e,t){super.setVal(e,t),e&&(this._lastVal=new L(this._win,e))}static findNextTabbable(e,t,i,s,o,r,a){const n=i||t.root.getElement();if(!n)return null;let u=null;const c=M._isTabbingTimer,d=e.getWindow();c&&d.clearTimeout(c),M.isTabbing=!0,M._isTabbingTimer=d.setTimeout(()=>{delete M._isTabbingTimer,M.isTabbing=!1},0);const m=(v,y)=>{u=v.findNextTabbable(y||s,o,r,a);const E=u==null?void 0:u.lastMoverOrGroupper;if(E&&!(u!=null&&u.element)&&!(u!=null&&u.uncontrolled)){const w=E.getElement(),p=w==null?void 0:w.parentElement,F=p&&D.getTabsterContext(e,p);if(F){const k=F.isGroupperFirst?F.groupper:F.mover;if(k){const T=o?w:de(w);m(k,T),u&&(u.outOfDOMOrder=!0)}}}},f=t.modalizer,h=t.groupper,_=t.mover;if(h&&_)m(t.isGroupperFirst?h:_);else if(h)m(h);else if(_)m(_);else if(f)m(f);else{let v;const y=w=>{v=w},E=o?e.focusable.findPrev({container:n,currentElement:s,onUncontrolled:y,ignoreUncontrolled:r,ignoreAccessibility:a,useActiveModalizer:!0}):e.focusable.findNext({container:n,currentElement:s,onUncontrolled:y,ignoreUncontrolled:r,ignoreAccessibility:a,useActiveModalizer:!0});u={element:v?void 0:E,uncontrolled:v}}const b=u==null?void 0:u.lastMoverOrGroupper,g=b==null?void 0:b.getElement();if(g){u=null;const v=fe(g,o);if(v){const y=D.getTabsterContext(e,v,{checkRtl:!0});if(y){let E=fe(v,!o);E&&(o||(E=de(E)||E),u=M.findNextTabbable(e,y,n,E,o,r,a),u&&!u.lastMoverOrGroupper&&(u.lastMoverOrGroupper=b))}}}return u}}M.isTabbing=!1;/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class xt extends A{constructor(e,t,i,s){super(i,e,X.Groupper,s,!0),this._setHandlers((o,r,a)=>{var n,u;const c=e.get(),d=o.input;if(c&&d){const m=D.getTabsterContext(i,d);if(m){let f;f=(n=t.findNextTabbable(a||void 0,r,!0,!0))===null||n===void 0?void 0:n.element,f||(f=(u=M.findNextTabbable(i,m,void 0,o.isOutside?d:fe(c,!r),r,!0,!0))===null||u===void 0?void 0:u.element),f&&N(f)}}})}}class kt extends j{constructor(e,t,i,s,o){super(e,t,s),this._shouldTabInside=!1,this.makeTabbable(!1),this._onDispose=i,e.controlTab||(this.dummyManager=new xt(this._element,this,e,o))}dispose(){var e;this._onDispose(this),this._element.get(),(e=this.dummyManager)===null||e===void 0||e.dispose(),delete this._first}findNextTabbable(e,t,i,s){var o;const r=this.getElement();if(!r)return null;const a=((o=e==null?void 0:e.__tabsterDummyContainer)===null||o===void 0?void 0:o.get())===r;if(!this._shouldTabInside&&e&&r.contains(e)&&!a)return{element:void 0,lastMoverOrGroupper:this};const n=this.getFirst(!0);if(!e||!r.contains(e)||a)return{element:n,lastMoverOrGroupper:n?void 0:this};const u=this._tabster;let c=null,d;const m=f=>{d=f};return this._shouldTabInside&&n&&(c=t?u.focusable.findPrev({container:r,currentElement:e,onUncontrolled:m,ignoreUncontrolled:i,ignoreAccessibility:s,useActiveModalizer:!0}):u.focusable.findNext({container:r,currentElement:e,onUncontrolled:m,ignoreUncontrolled:i,ignoreAccessibility:s,useActiveModalizer:!0}),!d&&!c&&this._props.tabbability===Pe.LimitedTrapFocus&&(c=t?u.focusable.findLast({container:r,ignoreUncontrolled:!0,ignoreAccessibility:s,useActiveModalizer:!0}):u.focusable.findFirst({container:r,ignoreUncontrolled:!0,ignoreAccessibility:s,useActiveModalizer:!0}))),{element:c,uncontrolled:d,lastMoverOrGroupper:c||d?void 0:this}}makeTabbable(e){this._shouldTabInside=e||!this._props.tabbability}isActive(e){var t;const i=this.getElement()||null;let s=!0;for(let r=i==null?void 0:i.parentElement;r;r=r.parentElement){const a=(t=x(this._tabster,r))===null||t===void 0?void 0:t.groupper;a&&(a._shouldTabInside||(s=!1))}let o=s?this._props.tabbability?this._shouldTabInside:!1:void 0;if(o&&e){const r=this._tabster.focusedElement.getFocusedElement();r&&(o=r!==this.getFirst(!0))}return o}getFirst(e){var t;const i=this.getElement();let s;if(i){if(e&&this._tabster.focusable.isFocusable(i))return i;s=(t=this._first)===null||t===void 0?void 0:t.get(),s||(s=this._tabster.focusable.findFirst({container:i,ignoreUncontrolled:!0,useActiveModalizer:!0})||void 0,s&&this.setFirst(s))}return s}setFirst(e){e?this._first=new L(this._tabster.getWindow,e):delete this._first}acceptElement(e,t){var i;const s=t.cachedGrouppers,o=(i=this.getElement())===null||i===void 0?void 0:i.parentElement,r=o&&D.getTabsterContext(this._tabster,o),a=r==null?void 0:r.groupper,n=r!=null&&r.isGroupperFirst?a:void 0;let u;const c=f=>{let h=s[f.id],_;return h?_=h.isActive:(_=this.isActive(!0),h=s[f.id]={isActive:_}),_};if(n&&(u=n.getElement(),!c(n)&&u&&t.container!==u&&t.container.contains(u)))return NodeFilter.FILTER_REJECT;const d=c(this),m=this.getElement();if(m&&d!==!0){if(m===e&&a&&(u||(u=a.getElement()),u&&!c(a)&&t.container.contains(u)&&u!==t.container)||m!==e&&m.contains(e))return NodeFilter.FILTER_REJECT;const f=s[this.id];let h;if("first"in f?h=f.first:h=f.first=this.getFirst(!0),h&&t.acceptCondition(h))return t.lastToIgnore=m,h!==t.from?(t.found=!0,t.foundElement=h,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT}}}class Ot{constructor(e,t){this._current={},this._grouppers={},this._init=()=>{const i=this._win();this._tabster.focusedElement.subscribeFirst(this._onFocus),i.document.addEventListener("mousedown",this._onMouseDown,!0),i.addEventListener("keydown",this._onKeyDown,!0)},this._onGroupperDispose=i=>{delete this._grouppers[i.id]},this._onFocus=i=>{i&&this._updateCurrent(i,!0,!0)},this._onMouseDown=i=>{i.target&&this._updateCurrent(i.target,!0)},this._onKeyDown=i=>{if(i.keyCode!==I.Enter&&i.keyCode!==I.Esc||i.ctrlKey||i.altKey||i.shiftKey||i.metaKey)return;const s=this._tabster.focusedElement.getFocusedElement();s&&this.handleKeyPress(s,i)},this._tabster=e,this._win=t,e.queueInit(this._init)}dispose(){const e=this._win();this._current={},this._updateTimer&&(e.clearTimeout(this._updateTimer),delete this._updateTimer),this._tabster.focusedElement.unsubscribe(this._onFocus),e.document.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._grouppers).forEach(t=>{this._grouppers[t]&&(this._grouppers[t].dispose(),delete this._grouppers[t])})}createGroupper(e,t,i){const s=new kt(this._tabster,e,this._onGroupperDispose,t,i);this._grouppers[s.id]=s;const o=this._tabster.focusedElement.getFocusedElement();return o&&e.contains(o)&&!this._updateTimer&&(this._updateTimer=this._win().setTimeout(()=>{delete this._updateTimer,o===this._tabster.focusedElement.getFocusedElement()&&this._updateCurrent(o,!0,!0)},0)),s}forgetCurrentGrouppers(){this._current={}}_updateCurrent(e,t,i){var s;this._updateTimer&&(this._win().clearTimeout(this._updateTimer),delete this._updateTimer);const o={};let r=!0;for(let a=e;a;a=a.parentElement){const n=(s=x(this._tabster,a))===null||s===void 0?void 0:s.groupper;if(n){if(o[n.id]=!0,r&&i&&a!==e&&(r=!1),t||!r){this._current[n.id]=n;const u=n.isActive()||e!==a&&(!n.getProps().delegated||n.getFirst(!1)!==e);n.makeTabbable(u)}r=!1}}for(const a of Object.keys(this._current)){const n=this._current[a];n.id in o||(n.makeTabbable(!1),n.setFirst(void 0),delete this._current[a])}}handleKeyPress(e,t,i){var s;const o=this._tabster,r=D.getTabsterContext(o,e),a=r==null?void 0:r.modalizerInGroupper;let n=(r==null?void 0:r.groupper)||a;if(r&&n){if(r.ignoreKeydown(t))return;let u;const c=n.getElement();if(t.keyCode===I.Enter)c&&(e===c||n.getProps().delegated&&e===n.getFirst(!1))&&(u=o.focusable.findNext({container:c,currentElement:e,useActiveModalizer:!0}));else if(t.keyCode===I.Esc){if(c&&c.contains(e))if(e!==c||i)u=n.getFirst(!0);else{const d=c.parentElement,m=d?D.getTabsterContext(o,d):void 0;n=m==null?void 0:m.groupper,u=n==null?void 0:n.getFirst(!0)}n&&(n.makeTabbable(!1),a&&((s=o.modalizer)===null||s===void 0||s.setActive(void 0)))}u&&(t.preventDefault(),t.stopImmediatePropagation(),u.focus())}}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class At extends qe{constructor(e){super(),this._onChange=t=>{this.setVal(t,void 0)},this._keyborg=et(e()),this._keyborg.subscribe(this._onChange)}dispose(){super.dispose(),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),tt(this._keyborg),delete this._keyborg)}setNavigatingWithKeyboard(e){var t;(t=this._keyborg)===null||t===void 0||t.setVal(e)}isNavigatingWithKeyboard(){var e;return!!(!((e=this._keyborg)===null||e===void 0)&&e.isNavigatingWithKeyboard())}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */let Nt=0;const ne="aria-hidden";class zt extends A{constructor(e,t,i){super(t,e,X.Modalizer,i),this._setHandlers((s,o)=>{var r,a,n;const u=e.get(),c=u&&((r=D.getRoot(t,u))===null||r===void 0?void 0:r.getElement()),d=s.input;let m;if(c&&d){const f=(a=d.__tabsterDummyContainer)===null||a===void 0?void 0:a.get(),h=D.getTabsterContext(t,f||d);h&&(m=(n=M.findNextTabbable(t,h,c,d,o,!0,!0))===null||n===void 0?void 0:n.element),m&&N(m)}})}}class Pt extends j{constructor(e,t,i,s,o,r){super(e,t,s),this._wasFocused=0,this.userId=s.id,this._onDispose=i,this._activeElements=r,e.controlTab||(this.dummyManager=new zt(this._element,e,o))}makeActive(e){if(this._isActive!==e){this._isActive=e;const t=this.getElement();if(t){const i=this._activeElements,s=i.map(o=>o.deref()).indexOf(t);e?s<0&&i.push(new WeakRef(t)):s>=0&&i.splice(s,1)}this.triggerFocusEvent(e?ke:Oe)}}focused(e){return e||(this._wasFocused=++Nt),this._wasFocused}setProps(e){e.id&&(this.userId=e.id),this._props={...e}}dispose(){var e;this.makeActive(!1),this._onDispose(this),(e=this.dummyManager)===null||e===void 0||e.dispose(),this._activeElements=[],this._remove()}isActive(){return!!this._isActive}contains(e){var t;return!!(!((t=this.getElement())===null||t===void 0)&&t.contains(e))}findNextTabbable(e,t,i,s){var o,r;if(!this.getElement())return null;const n=this._tabster;let u=null,c;const d=f=>{c=f},m=e&&((o=D.getRoot(n,e))===null||o===void 0?void 0:o.getElement());return m&&(u=n.focusable[t?"findPrev":"findNext"]({container:m,currentElement:e,onUncontrolled:d,ignoreUncontrolled:i,ignoreAccessibility:s,useActiveModalizer:!0}),!c&&!u&&this._props.isTrapped&&(!((r=n.modalizer)===null||r===void 0)&&r.activeId)&&(u=n.focusable[t?"findLast":"findFirst"]({container:m,ignoreUncontrolled:!0,ignoreAccessibility:s,useActiveModalizer:!0}))),{element:u,uncontrolled:c}}triggerFocusEvent(e,t){const i=this.getElement();let s=!1;if(i){const o=t?this._activeElements.map(r=>r.deref()):[i];for(const r of o)r&&!S(r,e,{id:this.userId,element:i,eventName:e})&&(s=!0)}return s}_remove(){}}class Lt{constructor(e){this._onModalizerDispose=i=>{const s=i.id,o=i.userId,r=this._parts[o];delete this._modalizers[s],r&&(delete r[s],Object.keys(r).length===0&&(delete this._parts[o],this.activeId===o&&this.setActive(void 0)))},this._onKeyDown=i=>{var s;if(i.keyCode!==I.Esc)return;const o=this._tabster,r=o.focusedElement.getFocusedElement();if(r){const a=D.getTabsterContext(o,r),n=a==null?void 0:a.modalizer;if(a&&!a.groupper&&(n!=null&&n.isActive())&&!a.ignoreKeydown(i)){const u=n.userId;if(u){const c=this._parts[u];if(c){const d=Object.keys(c).map(m=>{var f;const h=c[m],_=h.getElement();let b;return _&&(b=(f=x(this._tabster,_))===null||f===void 0?void 0:f.groupper),h&&_&&b?{el:_,focusedSince:h.focused(!0)}:{focusedSince:0}}).filter(m=>m.focusedSince>0).sort((m,f)=>m.focusedSince>f.focusedSince?-1:m.focusedSince<f.focusedSince?1:0);if(d.length){const m=d[0].el;m&&((s=o.groupper)===null||s===void 0||s.handleKeyPress(m,i,!0))}}}}}},this._onFocus=(i,s)=>{var o,r;const a=i&&D.getTabsterContext(this._tabster,i);if(!a||!i)return;const n=this._augMap;for(let c=i;c;c=c.parentElement)n.has(c)&&(n.delete(c),re(this._tabster,c,ne));const u=a.modalizer;if((r=u||((o=x(this._tabster,i))===null||o===void 0?void 0:o.modalizer))===null||r===void 0||r.focused(),(u==null?void 0:u.userId)===this.activeId){this.currentIsOthersAccessible=u==null?void 0:u.getProps().isOthersAccessible;return}if(s.isFocusedProgrammatically||this.currentIsOthersAccessible||u!=null&&u.getProps().isAlwaysAccessible)this.setActive(u);else{const c=this._win();c.clearTimeout(this._restoreModalizerFocusTimer),this._restoreModalizerFocusTimer=c.setTimeout(()=>this._restoreModalizerFocus(i),100)}},this._tabster=e,this._win=e.getWindow,this._modalizers={},this._parts={},this._augMap=new WeakMap,this._aug=[],this.activeElements=[],e.controlTab||e.root.addDummyInputs(),this._win().addEventListener("keydown",this._onKeyDown,!0),e.queueInit(()=>{this._tabster.focusedElement.subscribe(this._onFocus)})}dispose(){const e=this._win();e.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._modalizers).forEach(t=>{this._modalizers[t]&&(this._modalizers[t].dispose(),delete this._modalizers[t])}),e.clearTimeout(this._restoreModalizerFocusTimer),e.clearTimeout(this._hiddenUpdateTimer),this._parts={},delete this.activeId,this.activeElements=[],this._augMap=new WeakMap,this._aug=[],this._tabster.focusedElement.unsubscribe(this._onFocus)}createModalizer(e,t,i){var s;const o=new Pt(this._tabster,e,this._onModalizerDispose,t,i,this.activeElements),r=o.id,a=t.id;this._modalizers[r]=o;let n=this._parts[a];return n||(n=this._parts[a]={}),n[r]=o,e.contains((s=this._tabster.focusedElement.getFocusedElement())!==null&&s!==void 0?s:null)&&(a!==this.activeId?this.setActive(o):o.makeActive(!0)),o}isAugmented(e){return this._augMap.has(e)}hiddenUpdate(){this._hiddenUpdateTimer||(this._hiddenUpdateTimer=this._win().setTimeout(()=>{delete this._hiddenUpdateTimer,this._hiddenUpdate()},250))}setActive(e){const t=e==null?void 0:e.userId,i=this.activeId;if(i!==t){if(this.activeId=t,i){const s=this._parts[i];if(s)for(const o of Object.keys(s))s[o].makeActive(!1)}if(t){const s=this._parts[t];if(s)for(const o of Object.keys(s))s[o].makeActive(!0)}this.currentIsOthersAccessible=e==null?void 0:e.getProps().isOthersAccessible,this.hiddenUpdate()}}focus(e,t,i){const s=D.getTabsterContext(this._tabster,e),o=s==null?void 0:s.modalizer;if(o){this.setActive(o);const r=o.getProps(),a=o.getElement();if(a){if(t===void 0&&(t=r.isNoFocusFirst),!t&&this._tabster.keyboardNavigation.isNavigatingWithKeyboard()&&this._tabster.focusedElement.focusFirst({container:a})||(i===void 0&&(i=r.isNoFocusDefault),!i&&this._tabster.focusedElement.focusDefault(a)))return!0;this._tabster.focusedElement.resetFocus(a)}}return!1}acceptElement(e,t){var i;const s=t.modalizerUserId,o=(i=t.currentCtx)===null||i===void 0?void 0:i.modalizer;if(s)for(const r of this.activeElements){const a=r.deref();if(a&&(e.contains(a)||a===e))return NodeFilter.FILTER_SKIP}return s===(o==null?void 0:o.userId)||!s&&(o!=null&&o.getProps().isAlwaysAccessible)?void 0:NodeFilter.FILTER_SKIP}_hiddenUpdate(){var e;const t=this._tabster,i=t.getWindow().document.body,s=this.activeId,o=this._parts,r=[],a=[],n=[];for(const _ of Object.keys(o)){const b=o[_];for(const g of Object.keys(b)){const v=b[g],y=v.getElement(),w=v.getProps().isAlwaysAccessible;y&&(_===s?this.currentIsOthersAccessible||r.push(y):w?n.push(y):a.push(y))}}const u=this._augMap,c=r.length>0?[...r,...n]:void 0,d=[],m=new WeakMap,f=(_,b)=>{const g=_.tagName;if(g==="SCRIPT"||g==="STYLE")return;let v=!1;u.has(_)?b?v=!0:(u.delete(_),re(t,_,ne)):b&&re(t,_,ne,"true")&&(u.set(_,!0),v=!0),v&&(d.push(new WeakRef(_)),m.set(_,!0))},h=_=>{for(let b=_.firstElementChild;b;b=b.nextElementSibling){let g=!1,v=!1;if(c){for(const y of c){if(b===y){g=!0;break}if(b.contains(y)){v=!0;break}}v?h(b):g||f(b,!0)}else f(b,!1)}};c||n.forEach(_=>f(_,!1)),a.forEach(_=>f(_,!0)),i&&h(i),(e=this._aug)===null||e===void 0||e.map(_=>_.deref()).forEach(_=>{_&&!m.get(_)&&f(_,!1)}),this._aug=d,this._augMap=m}_restoreModalizerFocus(e){const t=e==null?void 0:e.ownerDocument;if(!e||!t)return;const i=D.getTabsterContext(this._tabster,e),s=i==null?void 0:i.modalizer,o=this.activeId;if(!s&&!o||s&&o===s.userId)return;const r=i==null?void 0:i.root.getElement();if(r){let a=this._tabster.focusable.findFirst({container:r,ignoreUncontrolled:!0,useActiveModalizer:!0});if(a){if(e.compareDocumentPosition(a)&document.DOCUMENT_POSITION_PRECEDING&&(a=this._tabster.focusable.findLast({container:r,ignoreUncontrolled:!0,useActiveModalizer:!0}),!a))throw new Error("Something went wrong.");this._tabster.focusedElement.focus(a);return}}e.blur()}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const Wt=["input","textarea","*[contenteditable]"].join(", ");class St extends A{constructor(e,t,i,s){super(t,e,X.Mover,s),this._onFocusDummyInput=o=>{var r,a;const n=this._element.get(),u=o.input;if(n&&u){const c=D.getTabsterContext(this._tabster,n);let d;c&&(d=(r=M.findNextTabbable(this._tabster,c,void 0,u,!o.isFirst,!0))===null||r===void 0?void 0:r.element);const m=(a=this._getMemorized())===null||a===void 0?void 0:a.get();m&&(d=m),d&&N(d)}},this._tabster=t,this._getMemorized=i,this._setHandlers(this._onFocusDummyInput)}}const ae=1,De=2,Ce=3;class Ut extends j{constructor(e,t,i,s,o){var r;super(e,t,s),this._visible={},this._onIntersection=n=>{for(const u of n){const c=u.target,d=K(this._win,c);let m,f=this._fullyVisible;if(u.intersectionRatio>=.25?(m=u.intersectionRatio>=.75?z.Visible:z.PartiallyVisible,m===z.Visible&&(f=d)):m=z.Invisible,this._visible[d]!==m){m===void 0?(delete this._visible[d],f===d&&delete this._fullyVisible):(this._visible[d]=m,this._fullyVisible=f);const h=this.getState(c);h&&S(c,le,h)}}},this._win=e.getWindow,this.visibilityTolerance=(r=s.visibilityTolerance)!==null&&r!==void 0?r:.8,(this._props.trackState||this._props.visibilityAware)&&(this._intersectionObserver=new IntersectionObserver(this._onIntersection,{threshold:[0,.25,.5,.75,1]}),this._observeState()),this._onDispose=i;const a=()=>s.memorizeCurrent?this._current:void 0;e.controlTab||(this.dummyManager=new St(this._element,e,a,o))}dispose(){var e;this._onDispose(this),this._intersectionObserver&&(this._intersectionObserver.disconnect(),delete this._intersectionObserver),delete this._current,delete this._fullyVisible,delete this._allElements,delete this._updateQueue,this._unobserve&&(this._unobserve(),delete this._unobserve);const t=this._win();this._setCurrentTimer&&(t.clearTimeout(this._setCurrentTimer),delete this._setCurrentTimer),this._updateTimer&&(t.clearTimeout(this._updateTimer),delete this._updateTimer),(e=this.dummyManager)===null||e===void 0||e.dispose()}setCurrent(e){e?this._current=new L(this._win,e):this._current=void 0,(this._props.trackState||this._props.visibilityAware)&&!this._setCurrentTimer&&(this._setCurrentTimer=this._win().setTimeout(()=>{var t;delete this._setCurrentTimer;const i=[];this._current!==this._prevCurrent&&(i.push(this._current),i.push(this._prevCurrent),this._prevCurrent=this._current);for(const s of i){const o=s==null?void 0:s.get();if(o&&((t=this._allElements)===null||t===void 0?void 0:t.get(o))===this){const r=this._props;if(o&&(r.visibilityAware!==void 0||r.trackState)){const a=this.getState(o);a&&S(o,le,a)}}}}))}getCurrent(){var e;return((e=this._current)===null||e===void 0?void 0:e.get())||null}findNextTabbable(e,t,i,s){var o;const r=this.getElement(),a=r&&((o=e==null?void 0:e.__tabsterDummyContainer)===null||o===void 0?void 0:o.get())===r;if(!r)return null;const u=this._tabster.focusable;let c=null,d;const m=f=>{d=f};return(this._props.tabbable||a||e&&!r.contains(e))&&(c=t?u.findPrev({currentElement:e,container:r,onUncontrolled:m,ignoreUncontrolled:i,ignoreAccessibility:s,useActiveModalizer:!0}):u.findNext({currentElement:e,container:r,onUncontrolled:m,ignoreUncontrolled:i,ignoreAccessibility:s,useActiveModalizer:!0})),{element:c,uncontrolled:d,lastMoverOrGroupper:c||d?void 0:this}}acceptElement(e,t){var i,s,o;if(!M.isTabbing)return!((i=t.currentCtx)===null||i===void 0)&&i.isExcludedFromMover?NodeFilter.FILTER_REJECT:void 0;const{memorizeCurrent:r,visibilityAware:a,hasDefault:n=!0}=this._props,u=this.getElement();if(u&&(r||a||n)&&(!u.contains(t.from)||((s=t.from.__tabsterDummyContainer)===null||s===void 0?void 0:s.get())===u)){let c;if(r){const d=(o=this._current)===null||o===void 0?void 0:o.get();d&&t.acceptCondition(d)&&(c=d)}if(!c&&n&&(c=this._tabster.focusable.findDefault({container:u,ignoreUncontrolled:!0,useActiveModalizer:!0})),!c&&a&&(c=this._tabster.focusable.findElement({container:u,ignoreUncontrolled:!0,useActiveModalizer:!0,isBackward:t.isBackward,acceptCondition:d=>{var m;const f=K(this._win,d),h=this._visible[f];return u!==d&&!!(!((m=this._allElements)===null||m===void 0)&&m.get(d))&&t.acceptCondition(d)&&(h===z.Visible||h===z.PartiallyVisible&&(a===z.PartiallyVisible||!this._fullyVisible))}})),c)return t.found=!0,t.foundElement=c,t.lastToIgnore=u,NodeFilter.FILTER_ACCEPT}}_observeState(){const e=this.getElement();if(this._unobserve||!e||typeof MutationObserver>"u")return;const t=this._win(),i=this._allElements=new WeakMap,s=this._tabster.focusable;let o=this._updateQueue=[];const r=new MutationObserver(f=>{for(const h of f){const _=h.target,b=h.removedNodes,g=h.addedNodes;if(h.type==="attributes")h.attributeName==="tabindex"&&o.push({element:_,type:De});else{for(let v=0;v<b.length;v++)o.push({element:b[v],type:Ce});for(let v=0;v<g.length;v++)o.push({element:g[v],type:ae})}}d()}),a=(f,h)=>{var _,b;const g=i.get(f);g&&h&&((_=this._intersectionObserver)===null||_===void 0||_.unobserve(f),i.delete(f)),!g&&!h&&(i.set(f,this),(b=this._intersectionObserver)===null||b===void 0||b.observe(f))},n=f=>{const h=s.isFocusable(f);i.get(f)?h||a(f,!0):h&&a(f)},u=f=>{const{mover:h}=m(f);if(h&&h!==this)if(h.getElement()===f&&s.isFocusable(f))a(f);else return;const _=he(t.document,f,b=>{const{mover:g,groupper:v}=m(b);if(g&&g!==this)return NodeFilter.FILTER_REJECT;const y=v==null?void 0:v.getFirst(!0);return v&&v.getElement()!==b&&y&&y!==b?NodeFilter.FILTER_REJECT:(s.isFocusable(b)&&a(b),NodeFilter.FILTER_SKIP)});if(_)for(_.currentNode=f;_.nextNode(););},c=f=>{i.get(f)&&a(f,!0);for(let _=f.firstElementChild;_;_=_.nextElementSibling)c(_)},d=()=>{!this._updateTimer&&o.length&&(this._updateTimer=t.setTimeout(()=>{delete this._updateTimer;for(const{element:f,type:h}of o)switch(h){case De:n(f);break;case ae:u(f);break;case Ce:c(f);break}o=this._updateQueue=[]},0))},m=f=>{const h={};for(let _=f;_;_=_.parentElement){const b=x(this._tabster,_);if(b&&(b.groupper&&!h.groupper&&(h.groupper=b.groupper),b.mover)){h.mover=b.mover;break}}return h};o.push({element:e,type:ae}),d(),r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]}),this._unobserve=()=>{r.disconnect()}}getState(e){const t=K(this._win,e);if(t in this._visible){const i=this._visible[t]||z.Invisible;return{isCurrent:this._current?this._current.get()===e:void 0,visibility:i}}}}function Bt(l,e,t,i,s,o,r,a){const n=t<s?s-t:r<l?l-r:0,u=i<o?o-i:a<e?e-a:0;return n===0?u:u===0?n:Math.sqrt(n*n+u*u)}class Vt{constructor(e,t){this._init=()=>{this._win().addEventListener("keydown",this._onKeyDown,!0),this._tabster.focusedElement.subscribe(this._onFocus)},this._onMoverDispose=i=>{delete this._movers[i.id]},this._onFocus=i=>{var s;for(let o=i;o;o=o.parentElement){const r=(s=x(this._tabster,o))===null||s===void 0?void 0:s.mover;if(r){r.setCurrent(i);break}}},this._onKeyDown=async i=>{var s,o,r,a;this._ignoredInputTimer&&(this._win().clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),(s=this._ignoredInputResolve)===null||s===void 0||s.call(this,!1);let n=i.keyCode;if(i.ctrlKey||i.altKey||i.shiftKey||i.metaKey)return;switch(n){case I.Down:case I.Right:case I.Up:case I.Left:case I.PageDown:case I.PageUp:case I.Home:case I.End:break;default:return}const u=this._tabster,c=u.focusedElement.getFocusedElement();if(!c||await this._isIgnoredInput(c,n))return;const d=D.getTabsterContext(u,c,{checkRtl:!0});if(!d||!d.mover||d.isExcludedFromMover||d.ignoreKeydown(i))return;const m=d.mover,f=m.getElement();if(d.isGroupperFirst){const T=d.groupper;if(T&&!T.isActive(!0)){for(let C=(o=T.getElement())===null||o===void 0?void 0:o.parentElement;C&&C!==f;C=C.parentElement)if(!((a=(r=x(u,C))===null||r===void 0?void 0:r.groupper)===null||a===void 0)&&a.isActive(!0))return}else return}if(!f)return;const h=u.focusable,_=m.getProps(),b=_.direction||B.Both,g=b===B.Both,v=g||b===B.Vertical,y=g||b===B.Horizontal,E=b===B.Grid,w=_.cyclic;let p,F,R=0,k=0;if(E&&(F=c.getBoundingClientRect(),R=Math.ceil(F.left),k=Math.floor(F.right)),d.isRtl&&(n===I.Right?n=I.Left:n===I.Left&&(n=I.Right)),n===I.Down&&v||n===I.Right&&(y||E))if(p=h.findNext({currentElement:c,container:f,useActiveModalizer:!0}),p&&E){const T=Math.ceil(p.getBoundingClientRect().left);k>T&&(p=void 0)}else!p&&w&&(p=h.findFirst({container:f,ignoreUncontrolled:!0,useActiveModalizer:!0}));else if(n===I.Up&&v||n===I.Left&&(y||E))p=h.findPrev({currentElement:c,container:f,useActiveModalizer:!0}),p&&E?Math.floor(p.getBoundingClientRect().right)>R&&(p=void 0):!p&&w&&(p=h.findLast({container:f,ignoreUncontrolled:!0,useActiveModalizer:!0}));else if(n===I.Home)E?h.findElement({container:f,currentElement:c,ignoreUncontrolled:!0,useActiveModalizer:!0,isBackward:!0,acceptCondition:T=>{var C;if(!h.isFocusable(T))return!1;const O=Math.ceil((C=T.getBoundingClientRect().left)!==null&&C!==void 0?C:0);return T!==c&&R<=O?!0:(p=T,!1)}}):p=h.findFirst({container:f,ignoreUncontrolled:!0,useActiveModalizer:!0});else if(n===I.End)E?h.findElement({container:f,currentElement:c,ignoreUncontrolled:!0,useActiveModalizer:!0,acceptCondition:T=>{var C;if(!h.isFocusable(T))return!1;const O=Math.ceil((C=T.getBoundingClientRect().left)!==null&&C!==void 0?C:0);return T!==c&&R>=O?!0:(p=T,!1)}}):p=h.findLast({container:f,ignoreUncontrolled:!0,useActiveModalizer:!0});else if(n===I.PageUp){if(h.findElement({currentElement:c,container:f,useActiveModalizer:!0,isBackward:!0,acceptCondition:T=>h.isFocusable(T)?Ee(this._win,T,m.visibilityTolerance)?(p=T,!1):!0:!1}),E&&p){const T=Math.ceil(p.getBoundingClientRect().left);h.findElement({currentElement:p,container:f,useActiveModalizer:!0,acceptCondition:C=>{if(!h.isFocusable(C))return!1;const O=Math.ceil(C.getBoundingClientRect().left);return R<O||T>=O?!0:(p=C,!1)}})}p&&ye(this._win,p,!1)}else if(n===I.PageDown){if(h.findElement({currentElement:c,container:f,useActiveModalizer:!0,acceptCondition:T=>h.isFocusable(T)?Ee(this._win,T,m.visibilityTolerance)?(p=T,!1):!0:!1}),E&&p){const T=Math.ceil(p.getBoundingClientRect().left);h.findElement({currentElement:p,container:f,useActiveModalizer:!0,isBackward:!0,acceptCondition:C=>{if(!h.isFocusable(C))return!1;const O=Math.ceil(C.getBoundingClientRect().left);return R>O||T<=O?!0:(p=C,!1)}})}p&&ye(this._win,p,!0)}else if(E){const T=n===I.Up,C=R,O=Math.ceil(F.top),$=k,_e=Math.floor(F.bottom);let Y,Z,Q=0;h.findAll({container:f,currentElement:c,isBackward:T,onElement:ee=>{const J=ee.getBoundingClientRect(),te=Math.ceil(J.left),me=Math.ceil(J.top),ie=Math.floor(J.right),ve=Math.floor(J.bottom);if(T&&O<ve||!T&&_e>me)return!0;const se=Math.ceil(Math.min($,ie))-Math.floor(Math.max(C,te)),be=Math.ceil(Math.min($-C,ie-te));if(se>0&&be>=se){const G=se/be;G>Q&&(Y=ee,Q=G)}else if(Q===0){const G=Bt(C,O,$,_e,te,me,ie,ve);(Z===void 0||G<Z)&&(Z=G,Y=ee)}else if(Q>0)return!1;return!0}}),p=Y}p&&(i.preventDefault(),i.stopImmediatePropagation(),N(p))},this._tabster=e,this._win=t,this._movers={},e.queueInit(this._init)}dispose(){var e;const t=this._win();this._tabster.focusedElement.unsubscribe(this._onFocus),(e=this._ignoredInputResolve)===null||e===void 0||e.call(this,!1),this._ignoredInputTimer&&(t.clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),t.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._movers).forEach(i=>{this._movers[i]&&(this._movers[i].dispose(),delete this._movers[i])})}createMover(e,t,i){const s=new Ut(this._tabster,e,this._onMoverDispose,t,i);return this._movers[s.id]=s,s}async _isIgnoredInput(e,t){var i;if(e.getAttribute("aria-expanded")==="true")return!0;if(He(e,Wt)){let s=0,o=0,r=0,a;if(e.tagName==="INPUT"||e.tagName==="TEXTAREA"){const n=e.type;if(r=(e.value||"").length,n==="email"||n==="number"){if(r){const c=(i=e.ownerDocument.defaultView)===null||i===void 0?void 0:i.getSelection();if(c){const d=c.toString().length,m=t===I.Left||t===I.Up;if(c.modify("extend",m?"backward":"forward","character"),d!==c.toString().length)return c.modify("extend",m?"forward":"backward","character"),!0;r=0}}}else{const c=e.selectionStart;if(c===null)return n==="hidden";s=c||0,o=e.selectionEnd||0}}else e.contentEditable==="true"&&(a=new(je(this._win))(n=>{this._ignoredInputResolve=h=>{delete this._ignoredInputResolve,n(h)};const u=this._win();this._ignoredInputTimer&&u.clearTimeout(this._ignoredInputTimer);const{anchorNode:c,focusNode:d,anchorOffset:m,focusOffset:f}=u.getSelection()||{};this._ignoredInputTimer=u.setTimeout(()=>{var h,_,b;delete this._ignoredInputTimer;const{anchorNode:g,focusNode:v,anchorOffset:y,focusOffset:E}=u.getSelection()||{};if(g!==c||v!==d||y!==m||E!==f){(h=this._ignoredInputResolve)===null||h===void 0||h.call(this,!1);return}if(s=y||0,o=E||0,r=((_=e.textContent)===null||_===void 0?void 0:_.length)||0,g&&v&&e.contains(g)&&e.contains(v)&&g!==e){let w=!1;const p=F=>{if(F===g)w=!0;else if(F===v)return!0;const R=F.textContent;if(R&&!F.firstChild){const T=R.length;w?v!==g&&(o+=T):(s+=T,o+=T)}let k=!1;for(let T=F.firstChild;T&&!k;T=T.nextSibling)k=p(T);return k};p(e)}(b=this._ignoredInputResolve)===null||b===void 0||b.call(this,!0)},0)}));if(a&&!await a||s!==o||s>0&&(t===I.Left||t===I.Up||t===I.Home)||s<r&&(t===I.Right||t===I.Down||t===I.End))return!0}return!1}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function Gt(l,e,t,i){if(typeof MutationObserver>"u")return()=>{};const s=e.getWindow;let o;const r=c=>{var d,m,f,h,_;for(const b of c){const g=b.target,v=b.removedNodes,y=b.addedNodes;if(b.type==="attributes")b.attributeName===P&&t(e,g);else{for(let E=0;E<v.length;E++)a(v[E],!0),(m=(d=e._dummyObserver).domChanged)===null||m===void 0||m.call(d,g);for(let E=0;E<y.length;E++)a(y[E]),(h=(f=e._dummyObserver).domChanged)===null||h===void 0||h.call(f,g)}}(_=e.modalizer)===null||_===void 0||_.hiddenUpdate()};function a(c,d){o||(o=W(s).elementByUId),n(c,d);const m=he(l,c,f=>n(f,d));if(m)for(;m.nextNode(););}function n(c,d){var m;if(!c.getAttribute)return NodeFilter.FILTER_SKIP;const f=c.__tabsterElementUID;return f&&o&&(d?delete o[f]:(m=o[f])!==null&&m!==void 0||(o[f]=new L(s,c))),(x(e,c)||c.hasAttribute(P))&&t(e,c,d),NodeFilter.FILTER_SKIP}const u=new MutationObserver(r);return i&&a(s().document.body),u.observe(l,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[P]}),()=>{u.disconnect()}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class Kt{constructor(){}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class Ht{constructor(e){this.keyboardNavigation=e.keyboardNavigation,this.focusedElement=e.focusedElement,this.focusable=e.focusable,this.root=e.root,this.uncontrolled=e.uncontrolled,this.core=e}}class jt{constructor(e,t){var i;this._forgetMemorizedElements=[],this._wrappers=new Set,this._initQueue=[],this._version="4.4.3",this._noop=!1,this.getWindow=()=>{if(!this._win)throw new Error("Using disposed Tabster.");return this._win},this._storage=dt(e),this._win=e;const s=this.getWindow;this.keyboardNavigation=new At(s),this.focusedElement=new M(this,s),this.focusable=new Mt(this),this.root=new D(this,t==null?void 0:t.autoRoot),this.uncontrolled=new Kt,this.controlTab=(i=t==null?void 0:t.controlTab)!==null&&i!==void 0?i:!0,this.rootDummyInputs=!!(t!=null&&t.rootDummyInputs),this._dummyObserver=new bt(s),this.internal={stopObserver:()=>{this._unobserve&&(this._unobserve(),delete this._unobserve)},resumeObserver:o=>{if(!this._unobserve){const r=s().document;this._unobserve=Gt(r,this,We,o)}}},Be(s),this.queueInit(()=>{this.internal.resumeObserver(!0)})}createTabster(e){const t=new Ht(this);return e||this._wrappers.add(t),t}disposeTabster(e,t){t?this._wrappers.clear():this._wrappers.delete(e),this._wrappers.size===0&&this.dispose()}dispose(){var e,t,i,s,o,r,a;this.internal.stopObserver();const n=this._win;n==null||n.clearTimeout(this._initTimer),delete this._initTimer,this._initQueue=[],this._forgetMemorizedElements=[],n&&this._forgetMemorizedTimer&&(n.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer),(e=this.outline)===null||e===void 0||e.dispose(),(t=this.crossOrigin)===null||t===void 0||t.dispose(),(i=this.deloser)===null||i===void 0||i.dispose(),(s=this.groupper)===null||s===void 0||s.dispose(),(o=this.mover)===null||o===void 0||o.dispose(),(r=this.modalizer)===null||r===void 0||r.dispose(),(a=this.observedElement)===null||a===void 0||a.dispose(),this.keyboardNavigation.dispose(),this.focusable.dispose(),this.focusedElement.dispose(),this.root.dispose(),this._dummyObserver.dispose(),ft(this.getWindow),Te(this.getWindow),this._storage=new WeakMap,this._wrappers.clear(),n&&(ct(n),delete n.__tabsterInstance,delete this._win)}storageEntry(e,t){const i=this._storage;let s=i.get(e);return s?t===!1&&Object.keys(s).length===0&&i.delete(e):t===!0&&(s={},i.set(e,s)),s}forceCleanup(){this._win&&(this._forgetMemorizedElements.push(this._win.document.body),!this._forgetMemorizedTimer&&(this._forgetMemorizedTimer=this._win.setTimeout(()=>{delete this._forgetMemorizedTimer;for(let e=this._forgetMemorizedElements.shift();e;e=this._forgetMemorizedElements.shift())Te(this.getWindow,e),M.forgetMemorized(this.focusedElement,e)},0),Ue(this.getWindow,!0)))}queueInit(e){var t;this._win&&(this._initQueue.push(e),this._initTimer||(this._initTimer=(t=this._win)===null||t===void 0?void 0:t.setTimeout(()=>{delete this._initTimer,this.drainInitQueue()},0)))}drainInitQueue(){if(!this._win)return;const e=this._initQueue;this._initQueue=[],e.forEach(t=>t())}}function Qt(l,e){let t=qt(l);return t||(t=new jt(l,e),l.__tabsterInstance=t),t.createTabster()}function si(l){const e=l.core;return e.groupper||(e.groupper=new Ot(e,e.getWindow)),e.groupper}function oi(l){const e=l.core;return e.mover||(e.mover=new Vt(e,e.getWindow)),e.mover}function ri(l,e){const t=l.core;return t.deloser||(t.deloser=new Je(t,e)),t.deloser}function ni(l){const e=l.core;return e.modalizer||(e.modalizer=new Lt(e)),e.modalizer}function Jt(l,e){l.core.disposeTabster(l,e)}function qt(l){return l.__tabsterInstance}const Xt=()=>{const{targetDocument:l}=it(),e=(l==null?void 0:l.defaultView)||void 0,t=V.useMemo(()=>e?Qt(e,{autoRoot:{},controlTab:!1}):null,[e]);return Re(()=>()=>{t&&Jt(t)},[t]),t},ai=l=>(Xt(),Qe(l)),$t=ot({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),Yt=l=>{const{title:e,primaryFill:t="currentColor",...i}=l,s={...i,title:void 0,fill:t},o=$t();return s.className=st(o.root,s.className),e&&(s["aria-label"]=e),!s["aria-label"]&&!s["aria-labelledby"]?s["aria-hidden"]=!0:s.role="img",s},li=(l,e,t)=>{const i=e==="1em"?"20":e,s=o=>{const r={...Yt(o),width:e,height:e,viewBox:`0 0 ${i} ${i}`,xmlns:"http://www.w3.org/2000/svg"};return V.createElement("svg",r,...t.map(a=>V.createElement("path",{d:a,fill:r.fill})))};return s.displayName=l,s};export{ii as T,ot as _,ai as a,ti as b,li as c,si as d,ni as e,ri as f,oi as g,ei as r,Xt as u};
